<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Clone - ØªÙŠÙƒ ØªÙˆÙƒ Ù…Ù‚Ù„Ø¯</title>
    <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ ØªÙŠÙƒ ØªÙˆÙƒ Ù…Ù‚Ù„Ø¯ Ù…Ø¨Ù†ÙŠ Ø¨ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©">
    
    <!-- CSS Files - Ø§Ù„ØªØ±ØªÙŠØ¨ Ù…Ù‡Ù… -->
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="public/icons/favicon.ico">
    <meta name="theme-color" content="#ff0050">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TikTok Clone">
    <link rel="apple-touch-icon" href="public/icons/icon-192.png">

    <style>
        /* Temporary fixes for immediate display */
        .app {
            height: 100vh !important;
            background: #000 !important;
        }
        
        .video-container {
            display: none;
            height: 100vh;
            position: relative;
            background: #000;
        }
        
        .video-container.active {
            display: block !important;
        }
        
        .video-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Main App Container -->
    <div id="app" class="app">
        <!-- Top Navigation -->
        <nav class="top-nav" id="topNav">
            <div class="nav-container">
                <div class="nav-left">
                    <button class="nav-btn" id="addFriendsBtn">
                        <i class="fas fa-user-plus"></i>
                    </button>
                </div>
                
                <div class="nav-center">
                    <span class="nav-tab" data-tab="following">Following</span>
                    <span class="nav-tab active" data-tab="foryou">For You</span>
                </div>
                
                <div class="nav-right">
                    <button class="nav-btn" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Video Feed -->
            <div class="video-feed" id="videoFeed">
                <!-- Video 1 -->
                <div class="video-container active" data-video-id="1">
                    <div class="video-placeholder" style="background: linear-gradient(45deg, #ff6b6b, #ee5a52);">
                        ðŸŽ¥ Video 1 - Placeholder
                    </div>
                    
                    <!-- Video Overlay - User Info & Actions -->
                    <div class="video-overlay">
                        <!-- User Info -->
                        <div class="user-info">
                            <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" 
                                 alt="User Avatar" class="user-avatar">
                            <div class="user-details">
                                <h4 class="username">@creative_user</h4>
                                <p class="video-caption">Amazing dance moves! ðŸ’ƒ #dance #viral</p>
                            </div>
                            <button class="follow-btn">Follow</button>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="action-buttons">
                            <div class="action-item">
                                <button class="action-btn like-btn" data-video-id="1">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <span class="action-count">12.5K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn comment-btn" data-video-id="1">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <span class="action-count">1.2K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn share-btn" data-video-id="1">
                                    <i class="fas fa-share"></i>
                                </button>
                                <span class="action-count">845</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn music-btn">
                                    <i class="fas fa-music"></i>
                                </button>
                                <span class="action-count">Sound</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video 2 -->
                <div class="video-container" data-video-id="2">
                    <div class="video-placeholder" style="background: linear-gradient(45deg, #4834d4, #686de0);">
                        ðŸŽ¥ Video 2 - Placeholder
                    </div>
                    
                    <div class="video-overlay">
                        <div class="user-info">
                            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" 
                                 alt="User Avatar" class="user-avatar">
                            <div class="user-details">
                                <h4 class="username">@comedy_king</h4>
                                <p class="video-caption">When you try to be cool ðŸ˜Ž #comedy #funny</p>
                            </div>
                            <button class="follow-btn">Follow</button>
                        </div>
                        
                        <div class="action-buttons">
                            <div class="action-item">
                                <button class="action-btn like-btn" data-video-id="2">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <span class="action-count">8.7K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn comment-btn" data-video-id="2">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <span class="action-count">956</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn share-btn" data-video-id="2">
                                    <i class="fas fa-share"></i>
                                </button>
                                <span class="action-count">423</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn music-btn">
                                    <i class="fas fa-music"></i>
                                </button>
                                <span class="action-count">Sound</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video 3 -->
                <div class="video-container" data-video-id="3">
                    <div class="video-placeholder" style="background: linear-gradient(45deg, #00d2d3, #54a0ff);">
                        ðŸŽ¥ Video 3 - Placeholder
                    </div>
                    
                    <div class="video-overlay">
                        <div class="user-info">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" 
                                 alt="User Avatar" class="user-avatar">
                            <div class="user-details">
                                <h4 class="username">@fitness_guru</h4>
                                <p class="video-caption">Daily workout routine ðŸ’ª #fitness #health</p>
                            </div>
                            <button class="follow-btn">Follow</button>
                        </div>
                        
                        <div class="action-buttons">
                            <div class="action-item">
                                <button class="action-btn like-btn" data-video-id="3">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <span class="action-count">15.2K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn comment-btn" data-video-id="3">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <span class="action-count">2.1K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn share-btn" data-video-id="3">
                                    <i class="fas fa-share"></i>
                                </button>
                                <span class="action-count">1.3K</span>
                            </div>
                            
                            <div class="action-item">
                                <button class="action-btn music-btn">
                                    <i class="fas fa-music"></i>
                                </button>
                                <span class="action-count">Sound</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav" id="bottomNav">
            <a href="index.html" class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="discover.html" class="nav-item">
                <i class="fas fa-compass"></i>
                <span>Discover</span>
            </a>
            <a href="upload.html" class="nav-item upload-btn">
                <i class="fas fa-plus-circle"></i>
            </a>
            <a href="inbox.html" class="nav-item">
                <i class="fas fa-comment"></i>
                <span>Inbox</span>
            </a>
            <a href="profile.html" class="nav-item">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
        </nav>
    </div>

    <!-- JavaScript Files -->
    <script src="src/js/core/app.js"></script>
    <script src="src/js/pages/home.js"></script>

    <script>
        // Temporary basic functionality until home.js is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('TikTok Clone Loaded');
            
            // Basic video switching
            const videoContainers = document.querySelectorAll('.video-container');
            const videoFeed = document.querySelector('.video-feed');
            let currentVideoIndex = 0;
            
            function switchVideo(index) {
                if (index < 0 || index >= videoContainers.length) return;
                
                videoContainers.forEach(container => container.classList.remove('active'));
                videoContainers[index].classList.add('active');
                currentVideoIndex = index;
                
                // Scroll to the active video
                videoFeed.scrollTo(0, index * window.innerHeight);
            }
            
            // Handle scroll for video switching
            let isScrolling = false;
            videoFeed.addEventListener('scroll', () => {
                if (isScrolling) return;
                
                isScrolling = true;
                const scrollPosition = videoFeed.scrollTop;
                const windowHeight = window.innerHeight;
                const newIndex = Math.round(scrollPosition / windowHeight);
                
                if (newIndex !== currentVideoIndex) {
                    switchVideo(newIndex);
                }
                
                setTimeout(() => {
                    isScrolling = false;
                }, 100);
            });
            
            // Like button functionality
            document.querySelectorAll('.like-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const icon = this.querySelector('i');
                    const countElement = this.parentElement.querySelector('.action-count');
                    
                    if (icon.style.color === 'red') {
                        icon.style.color = 'white';
                        // Decrease count
                        let currentCount = parseFloat(countElement.textContent);
                        countElement.textContent = (currentCount - 0.1).toFixed(1) + 'K';
                    } else {
                        icon.style.color = 'red';
                        // Increase count
                        let currentCount = parseFloat(countElement.textContent);
                        countElement.textContent = (currentCount + 0.1).toFixed(1) + 'K';
                    }
                });
            });
            
            // Follow button functionality
            document.querySelectorAll('.follow-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.textContent === 'Follow') {
                        this.textContent = 'Following';
                        this.style.background = '#333';
                    } else {
                        this.textContent = 'Follow';
                        this.style.background = '#fe2c55';
                    }
                });
            });
            
            // Tab switching
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Initialize first video
            switchVideo(0);
        });
    </script>
</body>
</html>
